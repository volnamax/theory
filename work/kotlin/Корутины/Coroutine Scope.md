### –ß—Ç–æ —Ç–∞–∫–æ–µ `Coroutine Scope`?

–æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ [[Coroutine Context]]. –≤ —á–µ–º –æ—Ç–ª–∏—á–∏–µ?
> - *–∫–æ–Ω—Ç–µ–∫—Å—Ç* —è–≤–ª—è–µ—Ç—Å—è –Ω–∞–±–æ—Ä–æ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ä—É—Ç–∏–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É –ª—é–±–æ–π –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω.
> - *—Å–∫–æ—É–ø* –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ—Ä—É—Ç–∏–Ω –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ, –∞ —Ç–∞–∫–∂–µ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º –ø–µ—Ä–µ–¥–∞–µ—Ç *Job*, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∏—Ö –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –∏ –±—É–¥–µ—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ—Ä—É—Ç–∏–Ω –≤ —Å–∫–æ—É–ø–µ.

CoroutineScope ‚Äì —ç—Ç–æ –æ–±–ª–∞—Å—Ç—å, –≤ –∫–æ—Ç–æ—Ä–æ–π –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∫–æ—Ä—É—Ç–∏–Ω—ã. –û–Ω –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∫–æ—Ä—É—Ç–∏–Ω –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –æ—Ç–º–µ–Ω–æ–π, –∫–æ–≥–¥–∞ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –∏—Ö –≤—ã–ø–æ–ª–Ω—è—Ç—å.

1. –ü–æ—á–µ–º—É –Ω—É–∂–µ–Ω CoroutineScope?

–ë–µ–∑ CoroutineScope, –µ—Å–ª–∏ –∫–æ—Ä—É—Ç–∏–Ω–∞ –∑–∞–ø—É—â–µ–Ω–∞, —Ç–æ:

```
–û–Ω–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, ViewModel –∏–ª–∏ Activity) —É–Ω–∏—á—Ç–æ–∂–∏—Ç—Å—è, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —É—Ç–µ—á–∫–∞–º –ø–∞–º—è—Ç–∏.
–ï–µ —Å–ª–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –±–µ–∑ CoroutineScope.

```

üí° CoroutineScope —É–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è–µ—Ç –∏—Ö, –∫–æ–≥–¥–∞ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–¥–∞—á–∏. 

**–ö–∞–∫ —Å–æ–∑–¥–∞–µ—Ç—Å—è CoroutineScope?** 
	‚úÖ 1. –ì–ª–æ–±–∞–ª—å–Ω—ã–π (GlobalScope)

–ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ—Ä—É—Ç–∏–Ω—É, –∫–æ—Ç–æ—Ä–∞—è –∂–∏–≤–µ—Ç —Å—Ç–æ–ª—å–∫–æ –∂–µ, —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

```kotlin
GlobalScope.launch {
	delay(1000)
	println("–†–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è —ç–∫—Ä–∞–Ω–∞!")
}
```

‚ùå –ú–∏–Ω—É—Å: –ù–µ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏.
	‚úÖ 2. –õ–æ–∫–∞–ª—å–Ω—ã–π (–≤—Ä—É—á–Ω—É—é —Å–æ–∑–¥–∞–µ—Ç—Å—è)

–ï—Å–ª–∏ –Ω–∞–º –Ω—É–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏ –≤—Ä—É—á–Ω—É—é:

```kotlin
val myScope = CoroutineScope([Dispatchers.IO](<http://dispatchers.io/>))
myScope.launch {
	delay(1000)
	println("–Ø –≤—ã–ø–æ–ª–Ω—è—é—Å—å –≤ IO –ø–æ—Ç–æ–∫–µ!")
}
```

‚ùå –ú–∏–Ω—É—Å: –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –æ—Ç–º–µ–Ω—è—Ç—å —Å –ø–æ–º–æ—â—å—é myScope.cancel().

‚úÖ 3. –ñ–∏–≤—É—â–∏–π –≤–º–µ—Å—Ç–µ —Å –æ–±—ä–µ–∫—Ç–æ–º (–ù–∞–ø—Ä–∏–º–µ—Ä, –≤ ViewModel)
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ ViewModel, Activity, Fragment, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏.

```kotlin
class MyViewModel : ViewModel() {
private val viewModelScope = CoroutineScope(Dispatchers.Main + SupervisorJob())
fun fetchData() {
    viewModelScope.launch {
        val data = getDataFromNetwork()
        println(data)
    }
}

override fun onCleared() {
    super.onCleared()
    viewModelScope.cancel() // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ—Ä—É—Ç–∏–Ω—ã –ø—Ä–∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–∏ ViewModel
}

```

‚úî –ü–ª—é—Å: –ö–æ—Ä—É—Ç–∏–Ω—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è–µ—Ç, –∫–æ–≥–¥–∞ ViewModel —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è. 

‚úÖ 4. –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ ViewModelScope
–í AndroidX ViewModel –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å viewModelScope:

```kotlin
class MyViewModel : ViewModel() {
	fun fetchData() {
		viewModelScope.launch {
			val data = getDataFromNetwork()
			println(data)
		}
	}
}
```

‚úî –ü–ª—é—Å: –ù–∏—á–µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ –æ—Ç–º–µ–Ω—è—Ç—å –≤—Ä—É—á–Ω—É—é.

‚úÖ 5. –í–Ω—É—Ç—Ä–∏ LifecycleScope (Activity, Fragment)

–î–ª—è Activity –∏–ª–∏ Fragment –∫–æ—Ä—É—Ç–∏–Ω—ã –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ –∏—Ö –∂–∏–∑–Ω–µ–Ω–Ω–æ–º—É —Ü–∏–∫–ª—É:

```kotlin
class MyActivity : AppCompatActivity() {
override fun onCreate(savedInstanceState: Bundle?) {
super.onCreate(savedInstanceState)
   lifecycleScope.launch {
        val data = getDataFromNetwork()
        println(data)
    }
}

```

}

‚úî –ü–ª—é—Å: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è–µ—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã –ø—Ä–∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–∏ —ç–∫—Ä–∞–Ω–∞. 3.

–ö–∞–∫ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏?

**coroutineScope**. –≠—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è-–±–∏–ª–¥–µ—Ä, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∫–æ—Ä—É—Ç–∏–Ω—ã. –í—Å–µ –∫–æ—Ä—É—Ç–∏–Ω—ã, –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–π –æ–±–ª–∞—Å—Ç–∏, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω—ã, –ø—Ä–µ–∂–¥–µ —á–µ–º coroutineScope –≤–µ—Ä–Ω–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–∑—ã–≤–∞—é—â–µ–π —Å—Ç–æ—Ä–æ–Ω–µ. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –≥—Ä—É–ø–ø—ã –∫–æ—Ä—É—Ç–∏–Ω.

**"CoroutineScope –≤ Kotlin ‚Äì —ç—Ç–æ –æ–±–ª–∞—Å—Ç—å, –≤ –∫–æ—Ç–æ—Ä–æ–π –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∫–æ—Ä—É—Ç–∏–Ω—ã. –û–Ω —É–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º, –ø–æ–∑–≤–æ–ª—è—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏. –í Android –ø—Ä–∏–Ω—è—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å viewModelScope –≤ ViewModel –∏ lifecycleScope –≤ Activity/Fragment, —á—Ç–æ–±—ã –∫–æ—Ä—É—Ç–∏–Ω—ã –∑–∞–≤–µ—Ä—à–∞–ª–∏—Å—å –≤–º–µ—Å—Ç–µ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ –∏ –Ω–µ –≤—ã–∑—ã–≤–∞–ª–∏ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏."**

[[kotlin]] 