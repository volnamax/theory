[[android]]

полная версия жц
![[Pasted image 20240304134104.png]]

для *custom view*
![[Pasted image 20240304134122.png]]

# Конструкторы

*view* имеет 4 конструктора с различными параметрами и их количеством: `Context`, `AttributeSet`, `defStyleAttr` и `defStyleRes`. нужно переопределить хотя бы один из конструкторов.

1. с одним параметром - `Context`: используется когда хотим создавать *view* из кода а не из *XML*.
2. с двумя параметрами - `Context`, `AttributeSet`: используется при создании с помощью *XML*. можно получить значения атрибутов *view*, указанные в разметке.
3. с тремя параметрами - `Context`, `AttributeSet`, `defStyleAttr`: используется при создании с помощью *XML*. можно задать стиль из темы.
4. с четырьмя параметрами - `Context`, `AttributeSet`, `defStyleAttr` и `defStyleRes`: используется при создании с помощью *XML*. можно задать стиль из темы и/или ресурсом стиля.

# Методы *View*

### *1. onAttachToWindow()*

После вызова данного метода, наша `View` прикрепляется к нашему `Activity` и знает о других элементах, которые также находятся на этом экране.

### *2. onMeasure()*

определяет размер и расположение на экране. принимает параметры: `widthMeasureSpec` и `heightMeasureSpec`, которые в свою очередь представляют собой требования измерения ширины и высоты вашего `View`

### *3. onLayout()*

вызывается при каждом изменении размера и позиции `View`, в том числе при его создании и перерисовке.

### *4. onDraw()*

При переопределении метода `onDraw()` используется объект `Canvas` (2D-холст), на котором можно рисовать графические элементы.

### *5. onSizeChanged()*

вызывается при изменении размеров `View` (смена ориентация устройства, изменение размера родительского контейнера)

### *6. onSaveInstanceState() и onRestoreInstanceState()*

позволяют сохранять и восстанавливать состояние `View` в случае, когда система уничтожает и пересоздает `View`, например, при повороте экрана или при нехватке памяти.

### *7. onTouchEvent()*

один из методов обработки событий пользовательского ввода в `View`. Вызывается при каждом событии касания на `View`, например при нажатии, перемещении или отпускании пальца.

# Обновление *View*

- `invalidate()` — используется, когда нужно только перерисовать ваш элемент.
- `requestLayout()` — используется, когда нужно изменить размеры вашего `View`.