### **–ß—Ç–æ —Ç–∞–∫–æ–µ –ö–æ—Ä—É—Ç–∏–Ω—ã –≤ Kotlin?**

> **–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –∫–æ—Ä—É—Ç–∏–Ω –Ω–∞–¥ –ø–æ—Ç–æ–∫–∞–º–∏:** –ª–µ–≥–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –Ω–∏–º–∏, —Ç.–∫. –Ω–µ –Ω—É–∂–Ω–æ –Ω–∏–∫–∞–∫–∏—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –∏ –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

- –ö–æ—Ä—É—Ç–∏–Ω—ã ‚Äî —ç—Ç–æ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞. –û–Ω–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ `CoroutineScope` –∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è `Job`.
- –ö–æ—Ä—É—Ç–∏–Ω—ã –≤ Kotlin ‚Äî —ç—Ç–æ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è –µ–≥–æ. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–∏—Å–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∏ –±–µ–∑ –∫–æ–ª–ª–±—ç–∫–æ–≤. –ë–ª–∞–≥–æ–¥–∞—Ä—è `Dispatchers` –º–æ–∂–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –∞ `suspend`-—Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫–∏.

–ü—Ä–∏–º–µ—Ä:

```java
fun main() = runBlocking {
	launch {
		println("–ö–æ—Ä—É—Ç–∏–Ω–∞ –∑–∞–ø—É—â–µ–Ω–∞ –≤ ${Thread.currentThread().name}")
	}
}
```

**–ü–æ—á–µ–º—É –∫–æ—Ä—É—Ç–∏–Ω—ã –ª—É—á—à–µ –ø–æ—Ç–æ–∫–æ–≤?**

|**–ö–æ—Ä—É—Ç–∏–Ω—ã**|**–û–±—ã—á–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ (Threads)**|
|---|---|
|–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã (—Å–æ—Ç–Ω–∏ —Ç—ã—Å—è—á –∫–æ—Ä—É—Ç–∏–Ω –Ω–∞ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ)|–î–æ—Ä–æ–≥–∏–µ –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤)|
|–ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ—Ç–æ–∫–æ–≤|–ö–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ —Ç—Ä–µ–±—É–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞|
|–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è|–ü–æ—Ç–æ–∫ –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–ª–∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è|
|–£–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ **Dispatchers**|–£–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π|
# –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º

–ö–æ—Ä—É—Ç–∏–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ **–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –≤ —Ü–µ–ø–æ—á–∫—É –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π —Å –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º (continuation)**. –ö–æ–≥–¥–∞ –∫–æ—Ä—É—Ç–∏–Ω–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è (`suspend`-—Ñ—É–Ω–∫—Ü–∏—è), –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, –∞ **–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** –≤—ã–∑—ã–≤–∞—é—â–µ–º—É –∫–æ–¥—É, —Å–æ—Ö—Ä–∞–Ω—è—è —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.



**suspend** ‚Äì –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏—è

–§—É–Ω–∫—Ü–∏–∏ —Å `suspend` –º–æ–≥—É—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Ç–æ–∫–∞. –ò—Ö –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –¥—Ä—É–≥–æ–π `suspend` —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ –∫–æ—Ä—É—Ç–∏–Ω—ã.

```kotlin
suspend fun fetchData(): String {
	delay(1000) // –ü—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç, –Ω–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ç–æ–∫
return "Data Loaded"
}
```

üí° delay() —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ Thread.sleep(), –Ω–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ç–æ–∫.
üîπ CoroutineScope ‚Äì –æ–±–ª–∞—Å—Ç—å –∂–∏–∑–Ω–∏ –∫–æ—Ä—É—Ç–∏–Ω [[Coroutine Scope]]

–ö–æ—Ä—É—Ç–∏–Ω—ã –≤—Å–µ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ (CoroutineScope).

```kotlin
CoroutineScope([Dispatchers.IO](<http://dispatchers.io/>)).launch {
fetchData()
}
```

### üîπ Dispatchers —É–ø—Ä–∞–≤–ª—è–µ—Ç, –≥–¥–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ—Ä—É—Ç–∏–Ω–∞:

```kotlin
Dispatchers.Main ‚Äì UI-–ø–æ—Ç–æ–∫
Dispatchers.IO ‚Äì –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞ (—Å–µ—Ç—å, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
Dispatchers.Default ‚Äì —Ç—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è (CPU)

```
[[Dispatchers]]


üîπ launch vs async [[launch VS async]]

```
launch {} ‚Äì –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–≥–æ–Ω—å –∏ –∑–∞–±—É–¥—å, –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
async {} + await() ‚Äì –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–∞–Ω–∞–ª–æ–≥ Future).

```

```kotlin
val result = async { fetchData() }
println(result.await()) // –ñ–¥–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```

1. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ –±–µ–∑ –∫–æ—Ä—É—Ç–∏–Ω (–ø–ª–æ—Ö–æ)

```kotlin
fun fetchData() {
	Thread {
		Thread.sleep(1000)
		println("Data Loaded")
	}.start()
}
```

‚ùå –ú–∏–Ω—É—Å—ã: Thread.sleep() –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ç–æ–∫, –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–π –∫–æ–¥ —Å–ª–æ–∂–µ–Ω. ‚úÖ –° –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏ (—Ö–æ—Ä–æ—à–æ)

```kotlin
suspend fun fetchData(): String {
	delay(1000)
return "Data Loaded"
}
```

```kotlin
fun main() = runBlocking {
	launch {
	println(fetchData())  // –í—ã–ø–æ–ª–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ 1 —Å–µ–∫
	}
}
```

‚úî –ü–ª—é—Å—ã: –ö–æ–¥ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π, –Ω–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ç–æ–∫. 4. –ö–∞–∫ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏?

"–ö–æ—Ä—É—Ç–∏–Ω—ã ‚Äì —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Kotlin, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–¥ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Ç–æ–∫–æ–≤. –û–Ω–∏ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã, —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ suspend-—Ñ—É–Ω–∫—Ü–∏–∏ –∏ CoroutineScope. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø–æ—Ç–æ–∫–æ–≤, –∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–≥—É—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è (delay()) –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (launch {} –∏ async {} –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ)." 

## **üìå –ö–∞–∫ –∫–æ—Ä—É—Ç–∏–Ω–∞ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –ø–æ—Ç–æ–∫–∞?**

–ö–æ—Ä—É—Ç–∏–Ω—É –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤ **–¥–∏—Å–ø–µ—Ç—á–µ—Ä–µ** `Dispatchers.Unconfined`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∫–∞–∫–æ–º—É-–ª–∏–±–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ—Ç–æ–∫—É. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –∫–æ—Ä—É—Ç–∏–Ω–∞ –Ω–∞—á–Ω—ë—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ **—Ç–µ–∫—É—â–µ–º –ø–æ—Ç–æ–∫–µ**, –Ω–æ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ (`suspend`) –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ **—Ç–æ–º –ø–æ—Ç–æ–∫–µ, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–≤—ã–º –µ—ë –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç**.

[[kotlin]]